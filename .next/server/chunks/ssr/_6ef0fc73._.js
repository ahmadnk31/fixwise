module.exports=[84435,a=>{"use strict";let b=(0,a.i(61237).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],84435)},69964,a=>{"use strict";let b=(0,a.i(61237).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],69964)},28232,a=>{"use strict";var b=a.i(16590);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},29577,a=>{"use strict";var b=a.i(16590),c=a.i(33565);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d])},57541,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(63652),g=a.r(25150),h=a.r(98672),i=f._(a.r(28269));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},37382,(a,b,c)=>{b.exports=a.r(57541)},17171,a=>{"use strict";var b=a.i(96974),c=a.i(16590),d=a.i(79197),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(97895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],17171)},5522,a=>{"use strict";var b=a.i(96974),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},8995,a=>{"use strict";var b=a.i(16590),c=a.i(34051),d=a.i(33565),e=a=>{var e;let g,h,{present:i,children:j}=a,k=function(a){var c,e;let[g,h]=b.useState(),i=b.useRef({}),j=b.useRef(a),k=b.useRef("none"),[l,m]=(c=a?"mounted":"unmounted",e={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},b.useReducer((a,b)=>e[a][b]??a,c));return b.useEffect(()=>{let a=f(i.current);k.current="mounted"===l?a:"none"},[l]),(0,d.useLayoutEffect)(()=>{let b=i.current,c=j.current;if(c!==a){let d=k.current,e=f(b);a?m("MOUNT"):"none"===e||b?.display==="none"?m("UNMOUNT"):c&&d!==e?m("ANIMATION_OUT"):m("UNMOUNT"),j.current=a}},[a,m]),(0,d.useLayoutEffect)(()=>{if(g){let a,b=g.ownerDocument.defaultView??window,c=c=>{let d=f(i.current).includes(c.animationName);if(c.target===g&&d&&(m("ANIMATION_END"),!j.current)){let c=g.style.animationFillMode;g.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===g.style.animationFillMode&&(g.style.animationFillMode=c)})}},d=a=>{a.target===g&&(k.current=f(i.current))};return g.addEventListener("animationstart",d),g.addEventListener("animationcancel",c),g.addEventListener("animationend",c),()=>{b.clearTimeout(a),g.removeEventListener("animationstart",d),g.removeEventListener("animationcancel",c),g.removeEventListener("animationend",c)}}m("ANIMATION_END")},[g,m]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(a=>{a&&(i.current=getComputedStyle(a)),h(a)},[])}}(i),l="function"==typeof j?j({present:k.isPresent}):b.Children.only(j),m=(0,c.useComposedRefs)(k.ref,(e=l,(h=(g=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.ref:(h=(g=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.props.ref:e.props.ref||e.ref));return"function"==typeof j||k.isPresent?b.cloneElement(l,{ref:m}):null};function f(a){return a?.animationName||"none"}e.displayName="Presence",a.s(["Presence",()=>e])},65602,a=>{"use strict";var b=a.i(96974),c=a.i(42261),d=a.i(97895);let e=(0,c.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,d.cn)(e({variant:c}),a),...f})}function g({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-title",className:(0,d.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...c})}function h({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-description",className:(0,d.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...c})}a.s(["Alert",()=>f,"AlertDescription",()=>h,"AlertTitle",()=>g])},87054,a=>{"use strict";var b=a.i(96974),c=a.i(69240),d=a.i(40695),e=a.i(3130),f=a.i(5522),g=a.i(17171),h=a.i(16590),i=a.i(34051),j=a.i(55831),k=a.i(38032),l=a.i(50150),m=a.i(28232),n=a.i(29577),o=a.i(8995),p=a.i(79197),q="Checkbox",[r,s]=(0,j.createContextScope)(q),[t,u]=r(q),v=h.forwardRef((a,c)=>{let{__scopeCheckbox:d,name:e,checked:f,defaultChecked:g,required:j,disabled:m,value:n="on",onCheckedChange:o,form:q,...r}=a,[s,u]=h.useState(null),v=(0,i.useComposedRefs)(c,a=>u(a)),w=h.useRef(!1),x=!s||q||!!s.closest("form"),[B=!1,C]=(0,l.useControllableState)({prop:f,defaultProp:g,onChange:o}),D=h.useRef(B);return h.useEffect(()=>{let a=s?.form;if(a){let b=()=>C(D.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[s,C]),(0,b.jsxs)(t,{scope:d,state:B,disabled:m,children:[(0,b.jsx)(p.Primitive.button,{type:"button",role:"checkbox","aria-checked":z(B)?"mixed":B,"aria-required":j,"data-state":A(B),"data-disabled":m?"":void 0,disabled:m,value:n,...r,ref:v,onKeyDown:(0,k.composeEventHandlers)(a.onKeyDown,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,k.composeEventHandlers)(a.onClick,a=>{C(a=>!!z(a)||!a),x&&(w.current=a.isPropagationStopped(),w.current||a.stopPropagation())})}),x&&(0,b.jsx)(y,{control:s,bubbles:!w.current,name:e,value:n,checked:B,required:j,disabled:m,form:q,style:{transform:"translateX(-100%)"},defaultChecked:!z(g)&&g})]})});v.displayName=q;var w="CheckboxIndicator",x=h.forwardRef((a,c)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=u(w,d);return(0,b.jsx)(o.Presence,{present:e||z(g.state)||!0===g.state,children:(0,b.jsx)(p.Primitive.span,{"data-state":A(g.state),"data-disabled":g.disabled?"":void 0,...f,ref:c,style:{pointerEvents:"none",...a.style}})})});x.displayName=w;var y=a=>{let{control:c,checked:d,bubbles:e=!0,defaultChecked:f,...g}=a,i=h.useRef(null),j=(0,m.usePrevious)(d),k=(0,n.useSize)(c);h.useEffect(()=>{let a=i.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(j!==d&&b){let c=new Event("click",{bubbles:e});a.indeterminate=z(d),b.call(a,!z(d)&&d),a.dispatchEvent(c)}},[j,d,e]);let l=h.useRef(!z(d)&&d);return(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:f??l.current,...g,tabIndex:-1,ref:i,style:{...a.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function z(a){return"indeterminate"===a}function A(a){return z(a)?"indeterminate":a?"checked":"unchecked"}var B=a.i(38581),C=a.i(97895);function D({className:a,...c}){return(0,b.jsx)(v,{"data-slot":"checkbox",className:(0,C.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(x,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,b.jsx)(B.CheckIcon,{className:"size-3.5"})})})}var E=a.i(87682),F=a.i(65602),G=a.i(19260),H=a.i(55005),I=a.i(69964),J=a.i(84435),K=a.i(37382);let L=[{code:"AT",name:"Austria"},{code:"BE",name:"Belgium"},{code:"BG",name:"Bulgaria"},{code:"HR",name:"Croatia"},{code:"CY",name:"Cyprus"},{code:"CZ",name:"Czech Republic"},{code:"DK",name:"Denmark"},{code:"EE",name:"Estonia"},{code:"FI",name:"Finland"},{code:"FR",name:"France"},{code:"DE",name:"Germany"},{code:"GR",name:"Greece"},{code:"HU",name:"Hungary"},{code:"IE",name:"Ireland"},{code:"IT",name:"Italy"},{code:"LV",name:"Latvia"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"MT",name:"Malta"},{code:"NL",name:"Netherlands"},{code:"PL",name:"Poland"},{code:"PT",name:"Portugal"},{code:"RO",name:"Romania"},{code:"SK",name:"Slovakia"},{code:"SI",name:"Slovenia"},{code:"ES",name:"Spain"},{code:"SE",name:"Sweden"}];function M(){let[a,i]=(0,h.useState)(""),[j,k]=(0,h.useState)(""),[l,m]=(0,h.useState)(""),[n,o]=(0,h.useState)(""),[p,q]=(0,h.useState)(!1),[r,s]=(0,h.useState)(""),[t,u]=(0,h.useState)(""),[v,w]=(0,h.useState)(""),[x,y]=(0,h.useState)(""),[z,A]=(0,h.useState)(""),[B,C]=(0,h.useState)(!1),[M,N]=(0,h.useState)(!1),[O,P]=(0,h.useState)(""),[Q,R]=(0,h.useState)(null),[S,T]=(0,h.useState)(!1),U=(0,H.useRouter)(),V=L.some(a=>a.code===r),W=async()=>{if(!v||!r)return void P("Please enter VAT number and select country");N(!0),P("");try{let a=await fetch("/api/validate-vat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vatNumber:v,countryCode:r})}),b=await a.json();b.valid?(C(!0),P("VAT number validated successfully!"),b.companyName&&!t&&u(b.companyName)):(C(!1),P(b.message||"Invalid VAT number"))}catch(a){P("Error validating VAT number")}finally{N(!1)}},X=async b=>{b.preventDefault();let d=(0,c.createClient)();if(T(!0),R(null),l!==n){R("Passwords do not match"),T(!1);return}if(p&&V){if(!t||!v||!x||!z){R("Please fill in all business details for EU countries"),T(!1);return}if(!B){R("Please validate your VAT number before signing up"),T(!1);return}}try{let{data:b,error:c}=await d.auth.signUp({email:j,password:l,options:{emailRedirectTo:"https://v0.app/chat/api/supabase/redirect/k3PVgERAkcc",data:{name:a,role:p?"shop":"user"}}});if(c)throw c;if(p&&b.user){let{error:c}=await d.from("repair_shops").insert({owner_id:b.user.id,name:a,email:j,country:r||null,business_name:t||null,vat_number:v||null,registration_number:x||null,business_address:z||null,vat_validated:B});c&&console.error("Error creating shop:",c)}U.push("/auth/sign-up-success")}catch(a){R(a instanceof Error?a.message:"An error occurred")}finally{T(!1)}};return(0,b.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-muted/50 p-6",children:[(0,b.jsx)(G.default,{href:"/",className:"mb-8 flex items-center gap-2",children:(0,b.jsx)(K.default,{src:"/logo.png",alt:"FixWise Logo",width:200,height:68,className:"h-14 w-auto"})}),(0,b.jsx)("div",{className:"w-full max-w-lg",children:(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{className:"text-2xl",children:"Sign up"}),(0,b.jsx)(e.CardDescription,{children:"Create a new account"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("form",{onSubmit:X,children:[(0,b.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"name",children:"Name"}),(0,b.jsx)(f.Input,{id:"name",type:"text",placeholder:"John Doe",required:!0,value:a,onChange:a=>i(a.target.value)})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(f.Input,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:j,onChange:a=>k(a.target.value)})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"password",children:"Password"}),(0,b.jsx)(f.Input,{id:"password",type:"password",required:!0,value:l,onChange:a=>m(a.target.value)})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"repeat-password",children:"Repeat Password"}),(0,b.jsx)(f.Input,{id:"repeat-password",type:"password",required:!0,value:n,onChange:a=>o(a.target.value)})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(D,{id:"shop-owner",checked:p,onCheckedChange:a=>q(!0===a)}),(0,b.jsx)(g.Label,{htmlFor:"shop-owner",className:"text-sm font-normal",children:"I am a repair shop owner"})]}),p&&(0,b.jsxs)("div",{className:"space-y-4 rounded-lg border p-4",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Business Details"}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"country",children:"Country"}),(0,b.jsxs)(E.Select,{value:r,onValueChange:s,children:[(0,b.jsx)(E.SelectTrigger,{children:(0,b.jsx)(E.SelectValue,{placeholder:"Select country"})}),(0,b.jsxs)(E.SelectContent,{children:[L.map(a=>(0,b.jsx)(E.SelectItem,{value:a.code,children:a.name},a.code)),(0,b.jsx)(E.SelectItem,{value:"other",children:"Other (Non-EU)"})]})]})]}),V&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(F.Alert,{children:(0,b.jsx)(F.AlertDescription,{children:"EU businesses must provide valid VAT and registration details"})}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"business-name",children:"Legal Business Name *"}),(0,b.jsx)(f.Input,{id:"business-name",type:"text",placeholder:"Acme Repair Ltd.",required:!0,value:t,onChange:a=>u(a.target.value)})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"vat-number",children:"VAT Number *"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Input,{id:"vat-number",type:"text",placeholder:"DE123456789",required:!0,value:v,onChange:a=>{w(a.target.value),C(!1)}}),(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:W,disabled:M||!v||!r,children:M?(0,b.jsx)(J.Loader2,{className:"h-4 w-4 animate-spin"}):B?(0,b.jsx)(I.CheckCircle2,{className:"h-4 w-4 text-green-600"}):"Validate"})]}),O&&(0,b.jsx)("p",{className:`text-sm ${B?"text-green-600":"text-destructive"}`,children:O})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"registration-number",children:"Company Registration Number *"}),(0,b.jsx)(f.Input,{id:"registration-number",type:"text",placeholder:"HRB 123456",required:!0,value:x,onChange:a=>y(a.target.value)})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"business-address",children:"Registered Business Address *"}),(0,b.jsx)(f.Input,{id:"business-address",type:"text",placeholder:"123 Main St, Berlin, Germany",required:!0,value:z,onChange:a=>A(a.target.value)})]})]})]}),Q&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:Q}),(0,b.jsx)(d.Button,{type:"submit",className:"w-full",disabled:S,children:S?"Creating account...":"Sign up"})]}),(0,b.jsxs)("div",{className:"mt-4 text-center text-sm",children:["Already have an account?"," ",(0,b.jsx)(G.default,{href:"/auth/login",className:"underline underline-offset-4",children:"Login"})]})]})})]})})]})}a.s(["default",()=>M],87054)}];

//# sourceMappingURL=_6ef0fc73._.js.map