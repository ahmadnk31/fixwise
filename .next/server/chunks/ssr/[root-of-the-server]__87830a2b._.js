module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},73714,a=>{a.n(a.i(82143))},99744,a=>{a.n(a.i(35385))},21337,a=>{a.n(a.i(16582))},59706,a=>{a.n(a.i(93550))},37967,a=>{"use strict";let b=(0,a.i(94355).registerClientReference)(function(){throw Error("Attempted to call ShopDirectory() from the server but ShopDirectory is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/shop-directory.tsx <module evaluation>","ShopDirectory");a.s(["ShopDirectory",0,b])},34056,a=>{"use strict";let b=(0,a.i(94355).registerClientReference)(function(){throw Error("Attempted to call ShopDirectory() from the server but ShopDirectory is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/shop-directory.tsx","ShopDirectory");a.s(["ShopDirectory",0,b])},53502,a=>{"use strict";a.i(37967);var b=a.i(34056);a.n(b)},49557,a=>{"use strict";var b=a.i(43392),c=a.i(98310),d=a.i(53502);function e(a){return a.toLowerCase().replace(/[^a-z0-9\s]/g,"").trim()}function f(a,b,c){let d=[],f=0,g=(a||[]).map(a=>e(a)),h=(c||[]).filter(a=>a.name).map(a=>({name:e(a.name),description:a.description?e(a.description):"",type:a.type?e(a.type):"",fullText:`${e(a.name)} ${a.description?e(a.description):""} ${a.type?e(a.type):""}`.trim()}));if(0===g.length&&0===h.length)return{matches:!1,score:0,matchedTerms:[]};let i=b.device_brand?e(b.device_brand):b.device_type?function(a){let b=e(a);for(let[a,c]of[["one plus","oneplus"],["oneplus","oneplus"],["hewlett packard","hp"],["macbook","apple"],["imac","apple"],["ipad","apple"],["ipod","apple"],["iphone","apple"],["galaxy","samsung"],["thinkpad","lenovo"],["alienware","dell"],["rog","asus"],["xperia","sony"],["pixel","google"],["redmi","xiaomi"],["poco","xiaomi"],["surface","microsoft"],["apple","apple"],["samsung","samsung"],["oneplus","oneplus"],["google","google"],["xiaomi","xiaomi"],["oppo","oppo"],["realme","realme"],["vivo","vivo"],["huawei","huawei"],["honor","honor"],["sony","sony"],["lg","lg"],["motorola","motorola"],["moto","motorola"],["nokia","nokia"],["dell","dell"],["hp","hp"],["lenovo","lenovo"],["asus","asus"],["acer","acer"],["msi","msi"],["razer","razer"],["microsoft","microsoft"]])if(b.includes(a))return c;return b.split(/\s+/)[0]||""}(b.device_type):"";if(i){let a=g.some(a=>{let b=e(a);return b.includes(i)||i.includes(b)||b.startsWith(i)||i.startsWith(b)}),b=h.some(a=>a.fullText.includes(i)||a.name.includes(i)||a.type.includes(i));(a||b)&&(f+=3,d.push(i))}if(b.device_type){let a=e(b.device_type),c=g.some(b=>{let c=e(b);return c.includes(a)||a.includes(c)||a.startsWith(c)||c.startsWith(a.split(" ")[0])}),i=h.some(b=>b.fullText.includes(a)||b.name.includes(a)||b.description.includes(a));(c||i)&&(f+=2,d.push(b.device_type))}if(b.repair_component){let a=[...function(a){let b=e(a),c=[b];for(let[a,d]of Object.entries({screen:["display","lcd","oled","amoled","touchscreen","touch screen"],display:["screen","lcd","oled","amoled","touchscreen"],battery:["power","charging","cell"],camera:["lens","photo","picture"],"charging port":["usb port","charging","port","connector"],speaker:["audio","sound"],microphone:["mic","audio input"],motherboard:["mainboard","logic board","pcb"],keyboard:["keys","typing"],trackpad:["touchpad","mouse pad"]}))(b.includes(a)||a.includes(b))&&c.push(...d);return[...new Set(c)]}(b.repair_component),...(b.repair_keywords||[]).map(a=>e(a))],c=g.some(b=>{let c=e(b);return a.some(a=>{let b=e(a);return c.includes(b)||b.includes(c)||c.startsWith(b)||b.startsWith(c)||c.split(/\s+/).includes(b)||b.split(/\s+/).includes(c)})}),i=h.some(b=>a.some(a=>{let c=e(a);return b.name.includes(c)||c.includes(b.name)||b.description.includes(c)||c.includes(b.description)||b.type.includes(c)||c.includes(b.type)||b.fullText.includes(c)||c.includes(b.fullText)||b.name.split(/\s+/).includes(c)||b.description.split(/\s+/).includes(c)||b.type.split(/\s+/).includes(c)}));(c||i)&&(f+=3,d.push(b.repair_component))}return b.repair_keywords&&b.repair_keywords.forEach(a=>{let b=e(a),c=g.some(a=>{let c=e(a);return c.includes(b)||b.includes(c)}),i=h.some(a=>a.fullText.includes(b)||a.name.includes(b)||a.description.includes(b)||a.type.includes(b));(c||i)&&(f+=1,d.push(a))}),{matches:f>=3,score:f,matchedTerms:[...new Set(d)]}}let g=process.env.NEXT_PUBLIC_SITE_URL||"https://fixwise.vercel.app",h={title:"Find Local Repair Shops Near You | FixWise",description:"Browse trusted repair shops for phone, laptop, and tablet repairs. Filter by expertise, location, and ratings. Verified repair professionals in your area. Find the best repair shop near you.",keywords:["repair shops near me","phone repair shops","laptop repair near me","local repair services","verified repair shops","device repair","reparatiezaken","telefoon reparatie","laptop reparatie"],openGraph:{title:"Find Local Repair Shops - FixWise",description:"Browse trusted repair shops for phone, laptop, and tablet repairs near you. Verified professionals with ratings and reviews.",type:"website",locale:"en_US",alternateLocale:["nl_NL"],url:`${g}/shops`,siteName:"FixWise",images:[{url:`${g}/logo.png`,width:1200,height:630,alt:"FixWise - Find Repair Shops"}]},twitter:{card:"summary_large_image",title:"Find Local Repair Shops - FixWise",description:"Browse trusted repair shops for phone, laptop, and tablet repairs near you.",images:[`${g}/logo.png`]},alternates:{canonical:`${g}/shops`,languages:{en:`${g}/shops`,nl:`${g}/shops`}}};async function i({searchParams:a}){let e=await a,g=await (0,c.createClient)(),h=null,i=null;if(e.diagnosis){let{data:a}=await g.from("diagnoses").select("*").eq("id",e.diagnosis).single();h=a,h?.ai_response?.repair_component&&(i=h.ai_response.repair_component.toLowerCase())}let{data:j,error:k}=await g.from("repair_shops").select("*"),{data:l}=await g.from("shop_products").select("*").eq("category","service"),m=new Map;l&&l.forEach(a=>{m.has(a.shop_id)||m.set(a.shop_id,[]),m.get(a.shop_id).push(a)});let n=(j||[]).map(a=>({...a,shop_products:m.get(a.id)||[]}));k&&console.error("Error fetching shops:",k);let o=n||[];if(h?.ai_response){var p;let a={device_brand:h.ai_response.device_brand,device_type:h.ai_response.device_type,repair_component:h.ai_response.repair_component,repair_keywords:h.ai_response.repair_keywords};p=o=o.filter(b=>{let c=(b.shop_products||[]).filter(a=>"service"===a.category&&!1!==a.in_stock);return f(b.expertise||[],a,c).matches}),0===(o=p.map(b=>{let c=(b.shop_products||[]).filter(a=>"service"===a.category&&!1!==a.in_stock);return{...b,matchResult:f(b.expertise||[],a,c)}}).sort((a,b)=>b.matchResult.score!==a.matchResult.score?b.matchResult.score-a.matchResult.score:b.rating!==a.rating?(b.rating||0)-(a.rating||0):void 0!==a.distance&&void 0!==b.distance?a.distance-b.distance:0)).length&&i&&(o=(n||[]).filter(b=>{let c=(b.expertise||[]).map(a=>a.toLowerCase()),d=(b.shop_products||[]).filter(a=>"service"===a.category).map(a=>`${a.name} ${a.description||""} ${a.type||""}`.toLowerCase()),e=i.toLowerCase(),f=c.some(b=>b.includes(e)||e.includes(b)||a.device_brand&&b.includes(a.device_brand.toLowerCase())),g=d.some(b=>b.includes(e)||e.includes(b)||a.device_brand&&b.includes(a.device_brand.toLowerCase()));return f||g})).sort((a,b)=>(b.rating||0)-(a.rating||0))}else o.sort((a,b)=>(b.rating||0)-(a.rating||0));return(0,b.jsx)(d.ShopDirectory,{shops:o,diagnosis:h,repairComponent:i})}a.s(["default",()=>i,"metadata",0,h],49557)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__87830a2b._.js.map