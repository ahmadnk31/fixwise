module.exports=[76929,a=>{"use strict";let b=(0,a.i(61237).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],76929)},54161,a=>{"use strict";var b=a.i(96974),c=a.i(3339),d=a.i(42261),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},31976,a=>{"use strict";let b=(0,a.i(61237).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["default",()=>b])},1556,a=>{"use strict";var b=a.i(31976);a.s(["Calendar",()=>b.default])},83796,a=>{"use strict";let b=(0,a.i(61237).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],83796)},29577,a=>{"use strict";var b=a.i(16590),c=a.i(33565);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d])},28232,a=>{"use strict";var b=a.i(16590);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},57541,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(63652),g=a.r(25150),h=a.r(98672),i=f._(a.r(28269));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},37382,(a,b,c)=>{b.exports=a.r(57541)},64537,a=>{"use strict";let b=(0,a.i(61237).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);a.s(["LogOut",()=>b],64537)},12582,a=>{"use strict";let b=(0,a.i(61237).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],12582)},96926,a=>{"use strict";let b=(0,a.i(61237).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],96926)},23702,a=>{"use strict";let b=(0,a.i(61237).default)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);a.s(["Store",()=>b],23702)},6155,a=>{"use strict";var b=a.i(96974),c=a.i(16590),d=a.i(3130),e=a.i(40695),f=a.i(64537),g=a.i(61237);let h=(0,g.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var i=a.i(23702);let j=(0,g.default)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);var k=a.i(1556),l=a.i(83796),m=a.i(19260),n=a.i(69240),o=a.i(55005),p=a.i(54161),q=a.i(87682),r=a.i(76929),s=a.i(96926),t=a.i(12582),u=a.i(73608);function v({lead:a,onStatusUpdate:e}){let[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(a.status),j=async b=>{g(!0);try{await e(a.id,b),i(b)}catch(a){console.error("Failed to update status:",a)}finally{g(!1)}};return(0,b.jsx)(d.Card,{className:"p-4",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"mb-2 flex items-start gap-2",children:[(0,b.jsx)(t.AlertCircle,{className:"mt-0.5 h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a.diagnoses.ai_response.probable_issue}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:a.diagnoses.user_input})]})]})}),(0,b.jsx)(p.Badge,{variant:"outline",className:(a=>{switch(a){case"pending":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";case"accepted":return"bg-blue-500/10 text-blue-500 border-blue-500/20";case"completed":return"bg-green-500/10 text-green-500 border-green-500/20";default:return""}})(h),children:h})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,b.jsx)(s.DollarSign,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:["Est. Cost: ",a.diagnoses.estimated_cost]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,b.jsx)(r.Clock,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:(0,u.format)(new Date(a.created_at),"MMM d, yyyy")})]})]}),(0,b.jsx)("div",{className:"border-t pt-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("span",{className:"text-sm font-semibold",children:"Update Status:"}),(0,b.jsxs)(q.Select,{value:h,onValueChange:j,disabled:f,children:[(0,b.jsx)(q.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(q.SelectValue,{})}),(0,b.jsxs)(q.SelectContent,{children:[(0,b.jsx)(q.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(q.SelectItem,{value:"accepted",children:"Accepted"}),(0,b.jsx)(q.SelectItem,{value:"completed",children:"Completed"})]})]}),f&&(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Updating..."})]})}),a.diagnoses.ai_response.recommended_action&&(0,b.jsxs)("div",{className:"rounded-lg bg-muted/50 p-3",children:[(0,b.jsx)("p",{className:"text-sm font-semibold",children:"AI Recommendation:"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:a.diagnoses.ai_response.recommended_action})]})]})})}var w=a.i(37382);function x({user:a,profile:g,shop:p,leads:q,bookingsCount:r=0}){let s=(0,o.useRouter)(),[t,u]=(0,c.useState)(!1),[x,y]=(0,c.useState)(q),z=async()=>{u(!0);let a=(0,n.createClient)();await a.auth.signOut(),s.push("/"),s.refresh()},A=async(a,b)=>{try{if(!(await fetch(`/api/leads/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b})})).ok)throw Error("Failed to update lead");y(x.map(c=>c.id===a?{...c,status:b}:c))}catch(a){console.error("Error updating lead:",a),alert("Failed to update lead status")}},B=x.filter(a=>"pending"===a.status).length,C=x.filter(a=>"accepted"===a.status).length,D=x.filter(a=>"completed"===a.status).length;return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)("header",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,b.jsxs)("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[(0,b.jsx)(m.default,{href:"/",className:"flex items-center gap-2",children:(0,b.jsx)(w.default,{src:"/logo.png",alt:"FixWise Logo",width:180,height:60,className:"h-12 w-auto"})}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.email}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:z,disabled:t,children:(0,b.jsx)(f.LogOut,{className:"h-4 w-4"})})]})]})}),(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"mb-2 text-3xl font-bold",children:"Dashboard"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["Welcome back, ",g?.name||a.email]})]}),p?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Store,{className:"h-5 w-5"}),p.name]}),(0,b.jsx)(d.CardDescription,{className:"mt-1",children:p.address})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(m.default,{href:"/shop/products",children:(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(l.Package,{className:"mr-2 h-4 w-4"}),"Edit"]})}),(0,b.jsx)(m.default,{href:"/shop/settings",children:(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(h,{className:"mr-2 h-4 w-4"}),"Settings"]})})]})]})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold",children:"Rating"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:p.rating.toFixed(1)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold",children:"Bookings"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold",children:"Pending"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:B})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold",children:"Accepted"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:C})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold",children:"Completed"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600",children:D})]})]}),(0,b.jsxs)("div",{className:"mt-6 flex gap-2",children:[(0,b.jsx)(m.default,{href:"/shop/products",className:"flex-1",children:(0,b.jsxs)(e.Button,{variant:"outline",className:"w-full",children:[(0,b.jsx)(l.Package,{className:"mr-2 h-4 w-4"}),"Products & Services"]})}),(0,b.jsx)(m.default,{href:"/shop/bookings",className:"flex-1",children:(0,b.jsxs)(e.Button,{variant:"outline",className:"w-full",children:[(0,b.jsx)(k.Calendar,{className:"mr-2 h-4 w-4"}),"View Calendar"]})})]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(j,{className:"h-5 w-5"}),"Repair Requests"]}),(0,b.jsx)(d.CardDescription,{children:"Manage customer repair requests"})]}),(0,b.jsx)(d.CardContent,{children:0===x.length?(0,b.jsx)("p",{className:"py-8 text-center text-sm text-muted-foreground",children:"No leads yet"}):(0,b.jsx)("div",{className:"space-y-4",children:x.map(a=>(0,b.jsx)(v,{lead:a,onStatusUpdate:A},a.id))})})]})]}):(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Store,{className:"h-5 w-5"}),"Set Up Your Shop"]}),(0,b.jsx)(d.CardDescription,{children:"You haven't created a shop listing yet"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("p",{className:"mb-4 text-sm text-muted-foreground",children:"Create your shop profile to start receiving repair requests from customers."}),(0,b.jsx)(m.default,{href:"/shop/settings",children:(0,b.jsxs)(e.Button,{children:[(0,b.jsx)(h,{className:"mr-2 h-4 w-4"}),"Create Shop Profile"]})})]})]})]})]})}a.s(["ShopDashboard",()=>x],6155)}];

//# sourceMappingURL=_2a57ee95._.js.map