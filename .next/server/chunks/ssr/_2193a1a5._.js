module.exports=[84435,a=>{"use strict";let b=(0,a.i(61237).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],84435)},69964,a=>{"use strict";let b=(0,a.i(61237).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],69964)},46893,a=>{"use strict";var b=a.i(96974),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},34333,a=>{"use strict";var b=a.i(96974),c=a.i(16590),d=a.i(56042),e=a.i(40695),f=a.i(46893),g=a.i(84435),h=a.i(97568),i=a.i(32267),j=a.i(69411),k=a.i(3130),l=a.i(54161),m=a.i(12582),n=a.i(69964),o=a.i(78360),p=a.i(96926);let q=(0,a.i(61237).default)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);var r=a.i(88811),s=a.i(19260),t=a.i(29457);function u({result:a,diagnosisId:d,onReset:f}){let g,{t:h}=(0,t.useI18n)(),[i,j]=(0,c.useState)([]),[u,v]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{(async()=>{if(a.device_type){v(!0);try{let b=a.repair_component?`${a.device_type} ${a.repair_component}`.trim():`${a.device_type} ${a.probable_issue}`.trim();console.log("[v0] Search attempt 1 - Query:",b);let c=await fetch(`/api/ifixit/search?query=${encodeURIComponent(b)}`),d=await c.json();console.log("[v0] Search attempt 1 - Results:",d.total),(!d.guides||0===d.guides.length)&&a.repair_component&&(b=`${a.device_type} ${a.repair_component} replacement`.trim(),console.log("[v0] Search attempt 2 - Query:",b),c=await fetch(`/api/ifixit/search?query=${encodeURIComponent(b)}`),d=await c.json(),console.log("[v0] Search attempt 2 - Results:",d.total)),d.guides&&0!==d.guides.length||(b=a.device_type,console.log("[v0] Search attempt 3 (fallback) - Query:",b),c=await fetch(`/api/ifixit/search?query=${encodeURIComponent(b)}`),d=await c.json(),console.log("[v0] Search attempt 3 - Results:",d.total)),j(d.guides?.slice(0,3)||[])}catch(a){console.error("[v0] Failed to fetch repair guides:",a)}finally{v(!1)}}})()},[a.device_type,a.repair_component,a.probable_issue]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(k.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(n.CheckCircle2,{className:"h-5 w-5 text-green-500"}),h.diagnosisResult.complete]}),(0,b.jsx)(k.CardDescription,{className:"mt-2",children:h.diagnosisResult.description})]}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:f,children:h.diagnosisResult.newDiagnosis})]})}),(0,b.jsxs)(k.CardContent,{className:"space-y-6",children:[(a.device_brand||a.device_type)&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"mb-2 text-sm font-semibold",children:h.diagnosisResult.device}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.device_brand&&(0,b.jsx)(l.Badge,{variant:"secondary",children:a.device_brand}),a.device_type&&(0,b.jsx)(l.Badge,{variant:"outline",children:a.device_type})]})]}),a.repair_component&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"mb-2 text-sm font-semibold",children:h.diagnosisResult.component}),(0,b.jsx)(l.Badge,{variant:"secondary",children:a.repair_component})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"mb-2 flex items-center gap-2 text-sm font-semibold",children:[(0,b.jsx)(m.AlertCircle,{className:"h-4 w-4"}),h.diagnosisResult.probableIssue]}),(0,b.jsx)("p",{className:"text-base",children:a.probable_issue})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"mb-2 text-sm font-semibold",children:h.diagnosisResult.likelyCause}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.likely_cause})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"mb-2 text-sm font-semibold",children:h.diagnosisResult.repairDifficulty}),(0,b.jsxs)(l.Badge,{variant:"outline",className:(g=Number.parseInt(a.repair_difficulty))<=2?"bg-green-500/10 text-green-500 border-green-500/20":g<=3?"bg-yellow-500/10 text-yellow-500 border-yellow-500/20":"bg-red-500/10 text-red-500 border-red-500/20",children:[h.diagnosisResult.level," ",a.repair_difficulty,"/5"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"mb-2 flex items-center gap-2 text-sm font-semibold",children:[(0,b.jsx)(p.DollarSign,{className:"h-4 w-4"}),h.diagnosisResult.estimatedCost]}),(0,b.jsx)("p",{className:"text-base font-semibold",children:a.estimated_cost})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"mb-2 flex items-center gap-2 text-sm font-semibold",children:[(0,b.jsx)(o.Wrench,{className:"h-4 w-4"}),h.diagnosisResult.recommendedAction]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.recommended_action})]})]})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{children:[(0,b.jsxs)(k.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(q,{className:"h-5 w-5"}),h.diagnosisResult.repairGuides]}),(0,b.jsx)(k.CardDescription,{children:h.diagnosisResult.guidesDescription})]}),(0,b.jsx)(k.CardContent,{children:u?(0,b.jsx)("div",{className:"py-8 text-center text-sm text-muted-foreground",children:h.diagnosisResult.loadingGuides}):i.length>0?(0,b.jsx)("div",{className:"space-y-3",children:i.map(a=>(0,b.jsx)(s.default,{href:a.url||`/repair-guide/${a.id}`,target:a.url?"_blank":void 0,rel:a.url?"noopener noreferrer":void 0,className:"block rounded-lg border p-4 transition-colors hover:bg-accent",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[a.image_url&&(0,b.jsx)("img",{src:a.image_url||"/placeholder.svg",alt:a.title,className:"h-16 w-16 rounded object-cover"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-semibold",children:a.title}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground line-clamp-2",children:a.summary}),a.difficulty&&(0,b.jsx)(l.Badge,{variant:"outline",className:"mt-2",children:a.difficulty})]})]})},a.id))}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:h.diagnosisResult.searchGuides}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row",children:[(0,b.jsx)("a",{href:`https://www.ifixit.com/Search?query=${encodeURIComponent(a.repair_component?`${a.device_type} ${a.repair_component}`:`${a.device_type} ${a.probable_issue}`)}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:(0,b.jsxs)(e.Button,{variant:"outline",className:"w-full",children:[(0,b.jsx)(r.ExternalLink,{className:"mr-2 h-4 w-4"}),h.diagnosisResult.searchiFixit]})}),(0,b.jsx)("a",{href:`https://www.youtube.com/results?search_query=${encodeURIComponent(a.repair_component?`${a.device_type} ${a.repair_component} repair`:`${a.device_type} ${a.probable_issue} repair`)}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:(0,b.jsxs)(e.Button,{variant:"outline",className:"w-full",children:[(0,b.jsx)(r.ExternalLink,{className:"mr-2 h-4 w-4"}),h.diagnosisResult.findVideos]})})]})]})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row",children:[(0,b.jsx)(s.default,{href:`/shops?diagnosis=${d}`,className:"flex-1",children:(0,b.jsx)(e.Button,{className:"w-full",size:"lg",children:h.diagnosisResult.findShops})}),(0,b.jsx)(e.Button,{variant:"outline",size:"lg",onClick:f,children:h.diagnosisResult.startOver})]})]})}function v(){let{t:a}=(0,t.useI18n)(),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),[s,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=localStorage.getItem("fixwise_diagnosis");if(a)try{let b=JSON.parse(a);v(b.result),x(b.diagnosisId),l(b.issue||"")}catch(a){console.error("Failed to restore diagnosis:",a),localStorage.removeItem("fixwise_diagnosis")}},[]);let A=(0,c.useCallback)(a=>{let b=a[0];if(b){n(b);let a=new FileReader;a.onloadend=()=>{p(a.result)},a.readAsDataURL(b)}},[]),{getRootProps:B,getInputProps:C,isDragActive:D}=(0,d.useDropzone)({onDrop:A,accept:{"image/*":[".jpeg",".jpg",".png",".gif",".webp"]},maxFiles:1,maxSize:5242880}),E=async b=>{b.preventDefault(),r(!0),z(null),v(null);try{let a=new FormData;a.append("issue",k),m&&a.append("image",m);let b=await fetch("/api/diagnose",{method:"POST",body:a});if(!b.ok)throw Error("Failed to get diagnosis");let c=await b.json();v(c.diagnosis),x(c.diagnosisId),localStorage.setItem("fixwise_diagnosis",JSON.stringify({result:c.diagnosis,diagnosisId:c.diagnosisId,issue:k}))}catch(b){z(b instanceof Error?b.message:a.common.error)}finally{r(!1)}};return s&&w?(0,b.jsx)(u,{result:s,diagnosisId:w,onReset:()=>{v(null),x(null),l(""),n(null),p(null),localStorage.removeItem("fixwise_diagnosis")}}):(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)(f.Textarea,{id:"issue",placeholder:a.diagnosis.describeIssue,value:k,onChange:a=>l(a.target.value),required:!0,rows:3,className:"resize-none rounded-full border-2 px-6 py-4 text-base shadow-lg focus-visible:ring-2"})}),(0,b.jsx)("div",{className:"flex items-center justify-center gap-4",children:(0,b.jsx)(e.Button,{type:"submit",size:"lg",disabled:q||!k.trim(),children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),a.diagnosis.analyzing]}):a.diagnosis.getDiagnosis})}),o?(0,b.jsx)("div",{className:"relative flex justify-center",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{src:o,alt:"Preview",className:"h-48 w-auto max-w-full rounded-lg object-cover shadow-md"}),(0,b.jsx)(e.Button,{type:"button",variant:"destructive",size:"icon",className:"absolute right-2 top-2",onClick:()=>{n(null),p(null)},children:(0,b.jsx)(i.X,{className:"h-4 w-4"})})]})}):(0,b.jsxs)("div",{...B(),className:`cursor-pointer rounded-lg border-2 border-dashed p-6 transition-colors ${D?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50 hover:bg-muted/50"}`,children:[(0,b.jsx)("input",{...C()}),(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 text-center",children:[(0,b.jsx)("div",{className:"rounded-full bg-primary/10 p-3",children:D?(0,b.jsx)(h.Upload,{className:"h-6 w-6 text-primary"}):(0,b.jsx)(j.Image,{className:"h-6 w-6 text-primary"})}),D?(0,b.jsx)("p",{className:"text-sm font-medium text-primary",children:a.diagnosis.uploadPhoto}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:(0,b.jsx)("span",{className:"text-primary underline",children:a.diagnosis.uploadPhoto})}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, GIF up to 5MB"})]})]})]}),y&&(0,b.jsx)("p",{className:"text-center text-sm text-destructive",children:y})]})})}a.s(["DiagnosisForm",()=>v],34333)},37926,a=>{"use strict";var b=a.i(96974),c=a.i(29457),d=a.i(19260);function e(){let{t:a}=(0,c.useI18n)();return(0,b.jsx)("p",{className:"text-lg text-muted-foreground",children:a.home.tagline})}function f(){let{t:a}=(0,c.useI18n)();return(0,b.jsxs)("div",{className:"flex justify-center gap-6 text-sm",children:[(0,b.jsx)(d.default,{href:"/shops",className:"text-muted-foreground hover:underline",children:a.home.browseShops}),(0,b.jsx)(d.default,{href:"/auth/sign-up",className:"text-muted-foreground hover:underline",children:a.home.registerShop})]})}function g(){let{t:a}=(0,c.useI18n)();return(0,b.jsx)("footer",{className:"py-4 text-center text-sm text-muted-foreground",children:a.home.footer})}a.s(["HomePageClient",()=>e,"HomePageFooter",()=>g,"HomePageLinks",()=>f])}];

//# sourceMappingURL=_2193a1a5._.js.map