{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/ss/Downloads/ai-repair-diagnosis-saas-main/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient as createSupabaseServerClient } from \"@supabase/ssr\"\nimport { cookies } from \"next/headers\"\n\nexport async function createServerClient() {\n  const cookieStore = await cookies()\n\n  return createSupabaseServerClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!, {\n    cookies: {\n      getAll() {\n        return cookieStore.getAll()\n      },\n      setAll(cookiesToSet) {\n        try {\n          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\n        } catch {\n          // The \"setAll\" method was called from a Server Component.\n          // This can be ignored if you have middleware refreshing\n          // user sessions.\n        }\n      },\n    },\n  })\n}\n\nexport const createClient = createServerClient\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,iTAAO;IAEjC,OAAO,IAAA,4SAA0B,sUAAoF;QACnH,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,YAAY,GAAG,CAAC,MAAM,OAAO;gBAClF,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AACF;AAEO,MAAM,eAAe","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///Users/ss/Downloads/ai-repair-diagnosis-saas-main/components/shop-directory.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ShopDirectory = registerClientReference(\n    function() { throw new Error(\"Attempted to call ShopDirectory() from the server but ShopDirectory is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/shop-directory.tsx <module evaluation>\",\n    \"ShopDirectory\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,gBAAgB,IAAA,+aAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,+DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///Users/ss/Downloads/ai-repair-diagnosis-saas-main/components/shop-directory.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ShopDirectory = registerClientReference(\n    function() { throw new Error(\"Attempted to call ShopDirectory() from the server but ShopDirectory is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/shop-directory.tsx\",\n    \"ShopDirectory\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,gBAAgB,IAAA,+aAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,2CACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///Users/ss/Downloads/ai-repair-diagnosis-saas-main/app/shops/page.tsx"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\"\nimport { ShopDirectory } from \"@/components/shop-directory\"\nimport type { Metadata } from \"next\"\nimport { shopMatchesDiagnosis, sortShopsByRelevance } from \"@/lib/utils/shop-matching\"\n\nexport const metadata: Metadata = {\n  title: \"Find Local Repair Shops Near You\",\n  description: \"Browse trusted repair shops for phone, laptop, and tablet repairs. Filter by expertise, location, and ratings. Verified repair professionals in your area.\",\n  keywords: [\"repair shops near me\", \"phone repair shops\", \"laptop repair near me\", \"local repair services\", \"verified repair shops\"],\n  openGraph: {\n    title: \"Find Local Repair Shops - FixWise\",\n    description: \"Browse trusted repair shops for phone, laptop, and tablet repairs near you.\",\n    type: \"website\",\n  },\n  alternates: {\n    canonical: \"/shops\",\n  },\n}\n\nexport default async function ShopsPage({\n  searchParams,\n}: {\n  searchParams: Promise<{ diagnosis?: string }>\n}) {\n  const params = await searchParams\n  const supabase = await createClient()\n\n  // Fetch diagnosis if provided\n  let diagnosis = null\n  let repairComponent = null\n  \n  if (params.diagnosis) {\n    const { data: diagnosisData } = await supabase.from(\"diagnoses\").select(\"*\").eq(\"id\", params.diagnosis).single()\n    diagnosis = diagnosisData\n    \n    if (diagnosis?.ai_response?.repair_component) {\n      repairComponent = diagnosis.ai_response.repair_component.toLowerCase()\n    }\n  }\n\n  let query = supabase.from(\"repair_shops\").select(\"*\")\n  \n  if (repairComponent) {\n    // Filter shops that have expertise matching the repair component\n    query = query.contains('expertise', [repairComponent])\n  }\n  \n  const { data: shops, error } = await query.order(\"rating\", { ascending: false })\n\n  if (error) {\n    console.error(\"Error fetching shops:\", error)\n  }\n\n  let filteredShops = shops || []\n  if (repairComponent && filteredShops.length === 0) {\n    const { data: allShops } = await supabase.from(\"repair_shops\").select(\"*\").order(\"rating\", { ascending: false })\n    \n    // Filter shops whose expertise includes words that match the repair component\n    filteredShops = (allShops || []).filter(shop => \n      shop.expertise.some((exp: string) => \n        exp.toLowerCase().includes(repairComponent) || \n        repairComponent.includes(exp.toLowerCase())\n      )\n    )\n  }\n\n  return <ShopDirectory shops={filteredShops} diagnosis={diagnosis} repairComponent={repairComponent} />\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;AAIO,MAAM,WAAqB;IAChC,OAAO;IACP,aAAa;IACb,UAAU;QAAC;QAAwB;QAAsB;QAAyB;QAAyB;KAAwB;IACnI,WAAW;QACT,OAAO;QACP,aAAa;QACb,MAAM;IACR;IACA,YAAY;QACV,WAAW;IACb;AACF;AAEe,eAAe,UAAU,EACtC,YAAY,EAGb;IACC,MAAM,SAAS,MAAM;IACrB,MAAM,WAAW,MAAM,IAAA,yIAAY;IAEnC,8BAA8B;IAC9B,IAAI,YAAY;IAChB,IAAI,kBAAkB;IAEtB,IAAI,OAAO,SAAS,EAAE;QACpB,MAAM,EAAE,MAAM,aAAa,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,aAAa,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM,OAAO,SAAS,EAAE,MAAM;QAC9G,YAAY;QAEZ,IAAI,WAAW,aAAa,kBAAkB;YAC5C,kBAAkB,UAAU,WAAW,CAAC,gBAAgB,CAAC,WAAW;QACtE;IACF;IAEA,IAAI,QAAQ,SAAS,IAAI,CAAC,gBAAgB,MAAM,CAAC;IAEjD,IAAI,iBAAiB;QACnB,iEAAiE;QACjE,QAAQ,MAAM,QAAQ,CAAC,aAAa;YAAC;SAAgB;IACvD;IAEA,MAAM,EAAE,MAAM,KAAK,EAAE,KAAK,EAAE,GAAG,MAAM,MAAM,KAAK,CAAC,UAAU;QAAE,WAAW;IAAM;IAE9E,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,yBAAyB;IACzC;IAEA,IAAI,gBAAgB,SAAS,EAAE;IAC/B,IAAI,mBAAmB,cAAc,MAAM,KAAK,GAAG;QACjD,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,gBAAgB,MAAM,CAAC,KAAK,KAAK,CAAC,UAAU;YAAE,WAAW;QAAM;QAE9G,8EAA8E;QAC9E,gBAAgB,CAAC,YAAY,EAAE,EAAE,MAAM,CAAC,CAAA,OACtC,KAAK,SAAS,CAAC,IAAI,CAAC,CAAC,MACnB,IAAI,WAAW,GAAG,QAAQ,CAAC,oBAC3B,gBAAgB,QAAQ,CAAC,IAAI,WAAW;IAG9C;IAEA,qBAAO,qZAAC,iJAAa;QAAC,OAAO;QAAe,WAAW;QAAW,iBAAiB;;;;;;AACrF","debugId":null}}]
}