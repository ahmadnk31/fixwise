{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/ss/Downloads/ai-repair-diagnosis-saas-main/app/api/ifixit/search/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\n\nexport async function GET(req: Request) {\n  try {\n    const { searchParams } = new URL(req.url)\n    const query = searchParams.get(\"query\")\n\n    if (!query) {\n      return NextResponse.json({ error: \"Query parameter is required\" }, { status: 400 })\n    }\n\n    console.log(\"[v0] iFixit search query:\", query)\n\n    const searchUrl = `https://www.ifixit.com/api/2.0/search/${encodeURIComponent(query)}?doctypes=guide`\n    console.log(\"[v0] iFixit API URL:\", searchUrl)\n\n    const response = await fetch(searchUrl, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n\n    console.log(\"[v0] iFixit API status:\", response.status)\n\n    if (!response.ok) {\n      console.error(\"[v0] iFixit API error:\", response.status, response.statusText)\n      throw new Error(`iFixit API error: ${response.status}`)\n    }\n\n    const data = await response.json()\n    console.log(\"[v0] iFixit API response:\", JSON.stringify(data).slice(0, 500))\n\n    const normalizedGuides = (data.results || []).map((guide: any) => ({\n      id: guide.guideid || guide.wikiid || guide.id,\n      title: guide.title || guide.display_title,\n      summary: guide.summary || guide.text,\n      image_url: guide.image?.standard || guide.image?.thumbnail,\n      difficulty: guide.difficulty,\n      url: guide.url,\n      dataType: guide.dataType,\n    }))\n\n    return NextResponse.json({\n      guides: normalizedGuides,\n      total: data.totalResults || 0,\n    })\n  } catch (error) {\n    console.error(\"[v0] iFixit search error:\", error)\n    return NextResponse.json({ error: \"Failed to search repair guides\", guides: [], total: 0 }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,IAAI,GAAY;IACpC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;QACxC,MAAM,QAAQ,aAAa,GAAG,CAAC;QAE/B,IAAI,CAAC,OAAO;YACV,OAAO,uTAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QACnF;QAEA,QAAQ,GAAG,CAAC,6BAA6B;QAEzC,MAAM,YAAY,CAAC,sCAAsC,EAAE,mBAAmB,OAAO,eAAe,CAAC;QACrG,QAAQ,GAAG,CAAC,wBAAwB;QAEpC,MAAM,WAAW,MAAM,MAAM,WAAW;YACtC,SAAS;gBACP,gBAAgB;YAClB;QACF;QAEA,QAAQ,GAAG,CAAC,2BAA2B,SAAS,MAAM;QAEtD,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CAAC,0BAA0B,SAAS,MAAM,EAAE,SAAS,UAAU;YAC5E,MAAM,IAAI,MAAM,CAAC,kBAAkB,EAAE,SAAS,MAAM,EAAE;QACxD;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,QAAQ,GAAG,CAAC,6BAA6B,KAAK,SAAS,CAAC,MAAM,KAAK,CAAC,GAAG;QAEvE,MAAM,mBAAmB,CAAC,KAAK,OAAO,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,QAAe,CAAC;gBACjE,IAAI,MAAM,OAAO,IAAI,MAAM,MAAM,IAAI,MAAM,EAAE;gBAC7C,OAAO,MAAM,KAAK,IAAI,MAAM,aAAa;gBACzC,SAAS,MAAM,OAAO,IAAI,MAAM,IAAI;gBACpC,WAAW,MAAM,KAAK,EAAE,YAAY,MAAM,KAAK,EAAE;gBACjD,YAAY,MAAM,UAAU;gBAC5B,KAAK,MAAM,GAAG;gBACd,UAAU,MAAM,QAAQ;YAC1B,CAAC;QAED,OAAO,uTAAY,CAAC,IAAI,CAAC;YACvB,QAAQ;YACR,OAAO,KAAK,YAAY,IAAI;QAC9B;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,uTAAY,CAAC,IAAI,CAAC;YAAE,OAAO;YAAkC,QAAQ,EAAE;YAAE,OAAO;QAAE,GAAG;YAAE,QAAQ;QAAI;IAC5G;AACF","debugId":null}}]
}